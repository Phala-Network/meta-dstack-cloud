# Sysbox recommended sysctl settings
# See: https://github.com/nestybox/sysbox/blob/master/docs/user-guide/install-package.md

# Allow unprivileged users to create user namespaces (required for rootless containers)
kernel.unprivileged_userns_clone = 1

# Raise inotify limits — each sysbox container runs its own init system (e.g. systemd)
# which uses inotify heavily; defaults (8192/128) exhaust quickly with multiple containers
fs.inotify.max_queued_events = 1048576
fs.inotify.max_user_watches = 1048576
fs.inotify.max_user_instances = 1048576

# Raise kernel keyring limits — each user namespace consumes kernel keys for UID/GID mappings
kernel.keys.maxkeys = 20000
kernel.keys.maxbytes = 1400000

# Raise max PID — sysbox containers share the host PID space; default 32768 exhausts
# quickly with many containers each running their own process trees
kernel.pid_max = 4194304
